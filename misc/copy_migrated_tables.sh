#!/bin/sh
# Workbench Table Data copy script
# 
# Execute this to copy table data from a source RDBMS to MySQL.
# Edit the options below to customize it. You will need to provide passwords, at least.
# 
# Source DB: Mssql@DRIVER=SQL Server;SERVER=75.66.126.206 (Microsoft SQL Server)
# Target DB: Mysql@75.66.126.206:3306


# Source and target DB passwords
arg_source_password=
arg_target_password=

if [ -z "$arg_source_password" ] && [ -z "$arg_target_password" ] ; then
    echo WARNING: Both source and target RDBMSes passwords are empty. You should edit this file to set them.
fi
arg_worker_count=2
# Uncomment the following options according to your needs

# Whether target tables should be truncated before copy
arg_truncate_target=--truncate-target
# Enable debugging output
arg_debug_output=--log-level=debug3

/usr/lib/mysql-workbench/wbcopytables --odbc-source="DRIVER={SQL Server};SERVER=75.66.126.206;DATABASE={};UID=sa" --target="root@75.66.126.206:3306" --source-password="$arg_source_password" --target-password="$arg_target_password" --thread-count=$arg_worker_count $arg_truncate_target $arg_debug_output --table '[cls]' '[dbo].[TFX_CustomerShoppingHotels]' '`cls`' '`TFX_CustomerShoppingHotels`' '[CustomerID], [HotelID]' --table '[cls]' '[dbo].[TFX_SiteParameters]' '`cls`' '`TFX_SiteParameters`' '[HotelID], [SiteID], [ParameterRoleID], CAST([ParameterValue] as NVARCHAR(300)) as [ParameterValue]' --table '[cls]' '[dbo].[TFX_Contacts]' '`cls`' '`TFX_Contacts`' '[ContactID], CAST([FirstName] as NVARCHAR(100)) as [FirstName], CAST([LastName] as NVARCHAR(100)) as [LastName], CAST([EMail] as NVARCHAR(100)) as [EMail], CAST([UserID] as NVARCHAR(100)) as [UserID], CAST([Password] as NVARCHAR(20)) as [Password], [Phone], [Ext], [Expires]' --table '[cls]' '[dbo].[TFX_CustomerRegions]' '`cls`' '`TFX_CustomerRegions`' '[RegionID], [RegionName], [RegionShortName], [C_CustomerID]' --table '[cls]' '[dbo].[tfx_V2_ErrorCodes]' '`cls`' '`tfx_V2_ErrorCodes`' 'CAST([ErrorCode] as NCHAR(8)) as [ErrorCode], [ErrorCodeID], CAST([ErrorDesc] as NVARCHAR(500)) as [ErrorDesc], CAST([ErrorSQL] as NVARCHAR(1000)) as [ErrorSQL]' --table '[cls]' '[dbo].[TFX_Sites]' '`cls`' '`TFX_Sites`' '[SiteID], CAST([SiteDesc] as NVARCHAR(300)) as [SiteDesc], [IsBranded], [SearchTypeID], [HaveDetailedRates], [IsAvailable], [IsActive]' --table '[cls]' '[dbo].[TFX_SiteParameterRoles]' '`cls`' '`TFX_SiteParameterRoles`' '[SiteParameterRoleID], CAST([RoleDesc] as NVARCHAR(50)) as [RoleDesc]' --table '[cls]' '[dbo].[TFX_Customers]' '`cls`' '`TFX_Customers`' '[CustomerID], CAST([LoginCode] as NVARCHAR(15)) as [LoginCode], [CustomerChainID], [CustomerName], [CustomerSiteID], [Address1], [Address2], [City], CAST([State] as NCHAR(2)) as [State], [Zip], [Phone], [HostHotelID], [C_CustomerID], CAST([CountryCode] as NCHAR(2)) as [CountryCode]' --table '[cls]' '[dbo].[TFX_SearchRequestQ]' '`cls`' '`TFX_SearchRequestQ`' '[RequestQID], [HotelID], [SiteID], [ArrivalDate], CAST([ArrivalDay] as NVARCHAR(3)) as [ArrivalDay], [LOS], [RateTypeID], [RoomTypeID], [Guests], [RunStartDate], [RunCompleteDate], [RequestDate], CAST([MachineName] as NVARCHAR(50)) as [MachineName], [RetryCount], [RetriesBeforeFail], [ErrorCodeID], [IsIncidental], CAST([SessionID] as NVARCHAR(100)) as [SessionID], CAST([EmailAddress] as NVARCHAR(50)) as [EmailAddress], [IsTestRun], [Activated]' --table '[cls]' '[dbo].[TFX_L_ContactRegions]' '`cls`' '`TFX_L_ContactRegions`' '[ContactID], [RegionID]' --table '[cls]' '[dbo].[TFX_L_ContactCustomers]' '`cls`' '`TFX_L_ContactCustomers`' '[ContactID], [CustomerID]' --table '[cls]' '[dbo].[TFX_FlashJobStatus]' '`cls`' '`TFX_FlashJobStatus`' 'CAST([SessionID] as NVARCHAR(50)) as [SessionID], [StartDate], [EndDate], [JobSize], CAST([Status] as NCHAR(1)) as [Status]' --table '[cls]' '[dbo].[TFX_Hotels]' '`cls`' '`TFX_Hotels`' '[HotelChainID], [HotelID], [SiteID], CAST([ShortName] as NVARCHAR(7)) as [ShortName], [Name], [Address], [Address2], [City], [State], [Zip], [Country], [DateCreated], [Phone]' --table '[cls]' '[dbo].[TFX_L_RegionCustomers]' '`cls`' '`TFX_L_RegionCustomers`' '[RegionID], [CustomerID]' --table '[cls]' '[dbo].[TFX_HotelChains]' '`cls`' '`TFX_HotelChains`' '[HotelChainID], [ChainShortName], [ChainName], [OwnedByID]' --table '[cls]' '[dbo].[tfx_V2_ScriptEngines]' '`cls`' '`tfx_V2_ScriptEngines`' '[ScriptEngineID], CAST([ScriptEngineDesc] as NVARCHAR(200)) as [ScriptEngineDesc], CAST([ScriptEngineExt] as NVARCHAR(5)) as [ScriptEngineExt], CAST([ScriptEngineApp] as NVARCHAR(20)) as [ScriptEngineApp]' --table '[cls]' '[dbo].[tfx_V2_Queue]' '`cls`' '`tfx_V2_Queue`' '[RequestID], [HotelID], [SiteID], [ArrivalDate], [LOS], [DictionaryID], [RoomTypeID], [NumOfGuest], [SearchProductID], [SearchEngineID], [SearchStartDate], [SearchStopDate], [RetryCount], [MaxRetries], CAST([ErrorCode] as NVARCHAR(8)) as [ErrorCode], CAST([SessionID] as NVARCHAR(50)) as [SessionID], CAST([MachineName] as NVARCHAR(50)) as [MachineName], CAST([EmailAddress] as NVARCHAR(100)) as [EmailAddress], CAST([ProxyUsed] as NVARCHAR(50)) as [ProxyUsed], [InProgress]' --table '[cls]' '[dbo].[TFX_Proxies]' '`cls`' '`TFX_Proxies`' 'CAST([Proxy] as NVARCHAR(30)) as [Proxy], [Port], [Expires], [ProxyGroup]' --table '[cls]' '[dbo].[TFX_CustomerShoppingSites]' '`cls`' '`TFX_CustomerShoppingSites`' '[CustomerID], [SiteID]' --table '[cls]' '[dbo].[tfx_V2_RateTypes]' '`cls`' '`tfx_V2_RateTypes`' '[RateTypeID], CAST([RateTypeDesc] as NVARCHAR(50)) as [RateTypeDesc], CAST([RateTypeDescShort] as NVARCHAR(10)) as [RateTypeDescShort]' --table '[cls]' '[dbo].[TFX_CorporateCustomers]' '`cls`' '`TFX_CorporateCustomers`' '[C_CustomerID], CAST([C_LoginCode] as NVARCHAR(15)) as [C_LoginCode], [C_CustomerChainID], [C_CustomerName], [Address1], [Address2], [City], CAST([State] as NCHAR(2)) as [State], [Zip], CAST([Phone] as NVARCHAR(10)) as [Phone]' --table '[cls]' '[dbo].[TFX_V2_SiteTimeOuts]' '`cls`' '`TFX_V2_SiteTimeOuts`' '[SiteID], [TimeOut]' --table '[cls]' '[dbo].[tfx_V2_UnfilteredRates]' '`cls`' '`tfx_V2_UnfilteredRates`' '[RequestID], [HotelID], [SiteID], [ArrivalDate], [LOS], [Rate], CAST([RateDesc] as NVARCHAR(1500)) as [RateDesc], CAST([ErrorCode] as NCHAR(8)) as [ErrorCode], CAST([CurrencyCode] as NVARCHAR(10)) as [CurrencyCode], [TimeInserted]'

